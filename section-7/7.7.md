# 7.7. “叶列表”声明

在使用“`leaf`”语句定义特定类型的简单标量变量的情况下，“`leaf-list`”语句用于定义特定类型的数组。 “`leaf-list`”语句带有一个参数，这个参数是一个标识符，后面是一个包含叶列表信息的子语句块。

在配置数据中，叶列表中的值必须是唯一的。

默认值的定义不能用“`if-feature`”语句来标记。

从概念上讲，数据树中的值必须是规范形式（见[9.1节](../section-9/9.1.md)）。

## 7.7.1. 排序

`YANG`支持两种样式来排序列表和叶列表中的条目。在许多列表中，列表条目的顺序不会影响列表配置的实现，服务器可以按任何合理的顺序自由排列列表条目。列表的“`description`”字符串可能会向服务器实现者建议一个排序。`YANG`将这种风格称为“系统排序(`system ordered`)”这样的列表用“`ordered-by system`”的语句表示。

例如，有效用户列表通常会按字母顺序排序，因为用户在配置中出现的顺序不会影响用户帐户的创建。

在其他样式的列表中，列表条目的顺序对于列表配置的实现是重要的，并且用户负责对条目进行排序，而服务器维持该顺序。`YANG`称这种风格的“用户排序(`user ordered`)”的名单;这样的列表用“按用户排序(`ordered-by user`)”的语句表示。

例如，数据包筛选器条目应用于传入流量的顺序可能会影响该流量被过滤的方式。用户需要决定是否应该在过滤条目之前或之后应用丢弃所有`TCP`流量的过滤条目，以允许来自可信接口的所有流量。排序的选择是至关重要的。

`YANG`在`NETCONF`的`<edit-config>`操作中提供了丰富的功能，可以控制用户排序列表中列表条目的顺序。列表条目可以被插入或重新排列，被定位为列表中的第一个或最后一个条目，或被定位在另一个特定条目之前或之后。

[7.7.7节](7.7.md#)介绍了“`ordered-by`”语句。

## 7.7.2. 叶列表的默认值

如果数据树中不存在叶子列表，则叶子列表的缺省值是服务器使用的值。缺省值的使用取决于架构树中不是无状态容器的叶节点最近的祖先节点（参见[7.5.1节](7.5.md#751-容器的存在)）：

- 如果模式树中不存在这样的祖先，则必须使用默认值。

- 否则，如果这个祖先是一个`case`节点，如果数据树中有任何节点存在于数据树中，或者`case`节点是选择的缺省情况，并且数据中没有任何其他情况的节点，则必须使用默认值树。

- 否则，如果祖先节点存在于数据树中，则必须使用默认值。

在这些情况下，默认值被认为正在使用中。

请注意，如果叶子列表或其任何祖先具有“​​`when`”条件或“`if-feature`”表达式的计算结果为“`false`”，则默认值不会被使用。

当使用默认值时，服务器必须在操作上表现得像数据树中存在的叶表一样，其默认值是其值。

如果叶列表具有一个或多个“`default`”语句，叶列表的默认值是“`default`”语句的值，并且如果叶列表是用户排序的，则默认值按照“`default`”语句。否则，如果叶列表的类型有一个默认值，并且叶列表没有一个值大于或等于1的“`min-elements`”语句，那么叶列表的默认值是该类型的一个实例默认值。在所有其他情况下，叶子列表没有任何默认值。

## 7.7.3. `leaf-list`子语句

```
+--------------+---------+-------------+
| substatement | section | cardinality |
+--------------+---------+-------------+
| config       | 7.21.1  | 0..1        |
| default      | 7.7.4   | 0..n        |
| description  | 7.21.3  | 0..1        |
| if-feature   | 7.20.2  | 0..n        |
| max-elements | 7.7.6   | 0..1        |
| min-elements | 7.7.5   | 0..1        |
| must         | 7.5.3   | 0..n        |
| ordered-by   | 7.7.7   | 0..1        |
| reference    | 7.21.4  | 0..1        |
| status       | 7.21.2  | 0..1        |
| type         | 7.4     | 1           |
| units        | 7.3.3   | 0..1        |
| when         | 7.21.5  | 0..1        |
+--------------+---------+-------------+
```

## 7.7.4. 叶列表的“`default`”声明

“`default`”语句是可选的，它将一个字符串作为参数，该字符串包含叶列表的默认值。

“`default`”语句的值必须根据叶列表的“`type`”语句中指定的类型有效。

在“`min-elements`”的值大于或等于1的节点上，“`default`”语句不能出现。

## 7.7.5. “最小元素”声明

“`min-elements`”语句是可选的，它将一个非负整数作为参数，对有效列表条目进行约束。 一个有效的叶子列表或者列表必须至少有`min`元素条目。

如果不存在“`min-elements`”语句，则默认为零。

约束的行为取决于模式树中叶子列表或列表最近的祖先节点的类型，它不是一个不存在的容器（见[7.5.1节](7.5.md#751-容器的存在)）：

- 如果模式树中不存在这样的祖先，则强制约束。

- 否则，如果这个祖先是一个`case`节点，那么如果这个`case`的任何其他节点存在，这个约束就会被执行。

- 否则，如果祖先节点存在，则强制执行。

根据[第8节](../section-8/README.md)的规定，约束条件得到了进一步的执行。
